FROM golang:1.14
WORKDIR /tmp/gogo
RUN go mod init gogotemp
RUN go get github.com/gogo/protobuf/proto@v1.3.1
RUN go get github.com/gogo/protobuf/protoc-gen-gogofaster@v1.3.1
RUN go get github.com/gogo/protobuf/gogoproto@v1.3.1

FROM ubuntu:18.04
RUN apt update
RUN apt install -y git protobuf-compiler
COPY --from=0 /go/bin/protoc-gen-gogofaster /usr/local/bin/protoc-gen-gogofaster
WORKDIR /home/me
RUN git clone https://github.com/gogo/protobuf.git && cd protobuf && git checkout v1.3.1
